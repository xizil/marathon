# ----------------------------------------------------------- #
# Configuration Fragment : Local Marathon Environment         #
# ----------------------------------------------------------- #
# This fragment instructs the driver to launch marathon with  #
# it's own mesos simulator (locally). This fragment assumes   #
# that the driver runs in a development environment with      #
# scala properly configured.                                  #
# ----------------------------------------------------------- #

# Test Metadata
# ===========================
meta:
  mesos: local-sim

# Definitions
# ===========================
define:

  # We are going to launch marathon ourselves, therefore we are defining
  # `marathon_url` to point to localhost
  marathon_url: http://127.0.0.1:8080

# Channel configuration
# ===========================
channels:

  # We are using a passive command-line channel in order to launch marathon
  # through scala, using mesos-simulator.
  - class: channel.CmdlineChannel
    cmdline: sbt "project mesos-simulation" "run --master 127.0.0.1:5050"
    cwd: "{{marathon_repo_dir}}"
    atstart: yes
